function scrollToTop(){var e="undefined"!=typeof e?e:0,a=$("body"),t=a.offset(),n=t.top;$("html, body").animate({scrollTop:n},500,"linear")}function message(e,a){var t=$('<div class="alert alert-'+e+' alert-fixed" style="display: none;">'+a+"</div>");t.appendTo($("body")).fadeIn(300).delay(3e3).fadeOut(500)}function formatData(e){if(!e.id)return e.text;var a=$('<div style="display:inline-block;float:right"><span style="text-align:right;font-style:italic; font-size:small; color:grey">'+e.dci+'</span></div><div style:"display:inline-block"><span>'+e.text+" </span></div>");return a}function ajoutPP(e,a,t){event.preventDefault(),t.firstElementChild.className="fa fa-circle-o-notch fa-spin";var n="";$.ajax({url:"/ajax/pp.ajax.php",type:"GET",data:"ajout&id_medic="+e,dataType:"json",success:function(e){"success"===e.error?(n="<strong>"+a+"</strong> a été ajouté au plan de prise",message("success",n),t.firstElementChild.className="glyphicon glyphicon-plus",$("#badgePP").html(function(e,a){return 1*a+1}).addClass("badge")):"present"===e.error?(n="<strong>"+a+"</strong> est déjà présent dans le plan de prise",message("warning",n),t.firstElementChild.className="glyphicon glyphicon-plus"):(alert("Erreur : "+e.error),t.firstElementChild.className="glyphicon glyphicon-plus")},error:function(){var e="Le médicament n'a pas pu être ajouté au plan de prise. Merci de réessayer.";message("danger",e),t.firstElementChild.className="glyphicon glyphicon-plus"}})}$(document).ready(function(){$(".hoverable").click(function(){var e=$(this).find(".glyphicon");$(this).parents("tr").find(".commentaire").toggle(),e.toggleClass("glyphicon-collapse-down glyphicon-collapse-up")}),$(function(){$(document).on("scroll",function(){$(window).scrollTop()>100?$(".scroll-top-wrapper").addClass("show"):$(".scroll-top-wrapper").removeClass("show")}),$(".scroll-top-wrapper").on("click",scrollToTop)}),$("#chevron .fa").hover(function(){$("#voir small").toggle()},function(){$("#voir small").toggle()}),$("#chevron .fa").click(function(){event.preventDefault(),event.stopPropagation();var e=$(this).parent().attr("href"),a=e.substring(e.indexOf("#"));$("html, body").animate({scrollTop:$(a).offset().top},750)})}),$(".pagination li").click(function(e){e.preventDefault();var a='<tr><td class="loading"><div><span class="fa fa-plus fa-spin"></span></div></td></tr>';if("disabled"!==$(this).attr("class")){$("table").html(a),$(".pagination li").removeClass("active"),$(this).addClass("active");var t=$(this).data("page");$("table").load("tableau_include.php?page="+t)}}),$(".pagination").change(function(e){e.preventDefault();var a='<tr><td class="loading"><div><span class="fa fa-plus fa-spin"></span></div></td></tr>';$("table").html(a);var t=$(this).find("option:selected").text();$("table").load("tableau_include.php?page="+t),$(".pagination").val(t)}),$("#choix-medic").select2({language:"fr",placeholder:"Cliquez pour ajouter un médicament au plan de prise",ajax:{url:"/ajax/choixMedic.php",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:e}},cache:!0},minimumInputLength:3,templateResult:formatData}),$("#choix-medic").on("select2:select",function(){var e=$(this),a=e.val(),t="";null!==a&&$.ajax({url:"/ajax/pp.ajax.php?ajout",type:"get",data:e.serialize(),dataType:"json",cache:!1,success:function(a){"success"===a.error?($("#badgePP").html(function(e,a){return 1*a+1}).addClass("badge"),t="<strong>"+e.text()+"</strong> a été ajouté au plan de prise. ",message("success",t),e.empty()):"present"===a.error&&(t="<strong>"+a.nom+"</strong> est déjà présent dans le plan de prise. ",message("warning",t))},error:function(){t="Le médicament n'a pas pu être ajouté au plan de prise. Merci de réessayer.",message("danger",t)}})});